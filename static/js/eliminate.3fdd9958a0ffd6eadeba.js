webpackJsonp([2],[,function(s,t){},,function(s,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"bottom"}},function(s,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"top",props:{index:{type:Number,default:0}}}},function(s,t,i){var e=i(0)(i(3),i(8),null,null);s.exports=e.exports},function(s,t,i){var e=i(0)(i(4),i(7),null,null);s.exports=e.exports},function(s,t){s.exports={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",[i("header",{staticClass:"nav"},[i("div",{staticClass:"container"},[s._m(0),s._v(" "),i("div",{staticClass:"nav-right nav-menu"},[i("a",{staticClass:"nav-item",class:{"is-active":0===s.index},attrs:{href:"home.html"}},[s._v("Home")]),s._v(" "),i("a",{staticClass:"nav-item",class:{"is-active":1===s.index},attrs:{href:""}},[s._v("Blog")]),s._v(" "),i("a",{staticClass:"nav-item",class:{"is-active":2===s.index},attrs:{href:"game.html"}},[s._v("Game")]),s._v(" "),i("a",{staticClass:"nav-item",class:{"is-active":3===s.index},attrs:{href:"https://github.com/xxweimei",target:"_blank"}},[s._v("Github")]),s._v(" "),i("a",{staticClass:"nav-item",class:{"is-active":4===s.index},attrs:{href:""}},[s._v("About")]),s._v(" "),i("a",{staticClass:"nav-item",class:{"is-active":5===s.index},attrs:{href:""}},[s._v("Donate")])])])])])},staticRenderFns:[function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"nav-left"},[i("a",{staticClass:"nav-item",attrs:{href:"home.html"}},[s._v("\n          xxweimei\n        ")])])}]}},function(s,t){s.exports={render:function(){var s=this,t=s.$createElement;s._self._c;return s._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",[i("footer",{staticClass:"footer"},[i("div",{staticClass:"container"},[i("div",{staticClass:"content has-text-centered"},[i("p",[s._v("Copyright © 2017 xxweimei")])])])])])}]}},function(s,t,i){i(18);var e=i(0)(i(12),i(21),"data-v-21edea2c",null);s.exports=e.exports},,,function(s,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i(6),o=i.n(e),r=i(5),l=i.n(r);t.default={components:{Top:o.a,Bottom:l.a},data:function(){return{maps:[],showMaps:[],colors:[],xSize:8,ySize:8,removeList:[],sourceCell:null,targetCell:null,removingFlag:!1,score:0,combo:0,timeProgress:100,gameTime:60,startFlag:!1}},mounted:function(){for(this.initMaps();this.isDieMap();)this.initMaps();this.refreshMaps()},computed:{time:function(){var s=(this.timeProgress/100*this.gameTime).toString().split(".");return 2===s.length?s[0]+"."+s[1].substr(0,3):s[0]}},methods:{startGame:function(){var s=this;if(!this.startFlag){this.startFlag=!0,this.timeProgress=100,this.score=0;var t=new Date;t.setSeconds(t.getSeconds()+this.gameTime);var i=setInterval(function(){t<=new Date?(clearInterval(i),s.timeProgress=0,s.startFlag=!1,alert("时间到")):s.timeProgress=(t-new Date)/s.gameTime/10},1)}},initMaps:function(){for(var s=0;s<this.ySize;s++)this.maps[s]=[];this.initColors();for(var t=0;t<this.ySize;t++)for(var i=0;i<this.xSize;i++){if(!(this.colors.length>0))return void this.initMaps();var e={},o=parseInt(Math.random()*this.colors.length,10);e.color=this.colors[o],e.x=t,e.y=i,this.maps[t][i]=e,this.isLine(t,i)?(i-=1,this.colors.splice(o,1)):this.initColors()}},initColors:function(){this.colors=["R","B","G","Y"]},isLine:function(s,t){var i=s-1>-1,e=s-2>-1,o=s+1<this.xSize,r=s+2<this.xSize,l=t-1>-1,a=t-2>-1,n=t+1<this.ySize,c=t+2<this.ySize;return!!(l&&n&&this.isCellColorEqual(this.maps[s][t-1],this.maps[s][t],this.maps[s][t+1]))||(!!(i&&o&&this.isCellColorEqual(this.maps[s-1][t],this.maps[s][t],this.maps[s+1][t]))||(!(!a||!this.isCellColorEqual(this.maps[s][t],this.maps[s][t-1],this.maps[s][t-2]))||(!(!c||!this.isCellColorEqual(this.maps[s][t],this.maps[s][t+1],this.maps[s][t+2]))||(!(!e||!this.isCellColorEqual(this.maps[s][t],this.maps[s-1][t],this.maps[s-2][t]))||r&&this.isCellColorEqual(this.maps[s][t],this.maps[s+1][t],this.maps[s+2][t])))))},isCellColorEqual:function(s,t,i){return!!(s&&t&&i&&s.color&&t.color&&i.color)&&(s.color===t.color&&s.color===i.color)},isDieMap:function(){for(var s=0;s<this.xSize;s++)for(var t=0;t<this.ySize;t++)if(this.maps[s][t].x=s,this.maps[s][t].y=t,!1===this.isDie(s,t))return!1;return!0},isDie:function(s,t){var i=s-1>-1,e=s-2>-1,o=s-3>-1,r=s+1<this.xSize,l=s+2<this.xSize,a=s+3<this.xSize,n=t-1>-1,c=t-2>-1,h=t-3>-1,m=t+1<this.ySize,u=t+2<this.ySize,f=t+3<this.ySize,p=this.maps[s][t].color;if(r){if(this.maps[s+1][t].color===p){if(a&&this.maps[s+3][t].color===p)return!1;if(l&&m&&this.maps[s+2][t+1].color===p)return!1;if(l&&n&&this.maps[s+2][t-1].color===p)return!1;if(e&&this.maps[s-2][t].color===p)return!1;if(i&&n&&this.maps[s-1][t-1].color===p)return!1;if(i&&m&&this.maps[s-1][t+1].color===p)return!1}if(n&&m&&this.maps[s+1][t-1].color===p&&this.maps[s+1][t+1].color===p)return!1}if(i){if(this.maps[s-1][t].color===p){if(o&&this.maps[s-3][t].color===p)return!1;if(e&&m&&this.maps[s-2][t+1].color===p)return!1;if(e&&n&&this.maps[s-2][t-1].color===p)return!1;if(l&&this.maps[s+2][t].color===p)return!1;if(r&&n&&this.maps[s+1][t-1].color===p)return!1;if(r&&m&&this.maps[s+1][t+1].color===p)return!1}if(n&&m&&this.maps[s-1][t-1].color===p&&this.maps[s-1][t+1].color===p)return!1}if(m){if(this.maps[s][t+1].color===p){if(f&&this.maps[s][t+3].color===p)return!1;if(i&&u&&this.maps[s-1][t+2].color===p)return!1;if(r&&u&&this.maps[s+1][t+2].color===p)return!1;if(c&&this.maps[s][t-2].color===p)return!1;if(r&&n&&this.maps[s+1][t-1].color===p)return!1;if(i&&n&&this.maps[s-1][t-1].color===p)return!1}if(i&&r&&this.maps[s-1][t+1].color===p&&this.maps[s+1][t+1].color===p)return!1}if(n){if(this.maps[s][t-1].color===p){if(h&&this.maps[s][t-3].color===p)return!1;if(i&&c&&this.maps[s-1][t-2].color===p)return!1;if(r&&c&&this.maps[s+1][t-2].color===p)return!1;if(u&&this.maps[s][t+2].color===p)return!1;if(r&&m&&this.maps[s+1][t+1].color===p)return!1;if(i&&m&&this.maps[s-1][t+1].color===p)return!1}if(i&&r&&this.maps[s-1][t-1].color===p&&this.maps[s+1][t-1].color===p)return!1}return!0},move:function(s,t){var i=this.maps[s.x][s.y].color,e=this.maps[t.x][t.y].color;if(this.maps[t.x][t.y].color=i,this.maps[s.x][s.y].color=e,!this.isLine(s.x,s.y)&&!this.isLine(t.x,t.y))return this.maps[s.x][s.y].color=i,this.maps[t.x][t.y].color=e,this.sourceCell=null,void(this.removingFlag=!1);this.fadeCircle()},near:function(s,t){var i=s.x===t.x&&(s.y===t.y+1||s.y===t.y-1)||s.y===t.y&&(s.x===t.x+1||s.x===t.x-1);return s.x>-1&&s.x<this.xSize&&s.y>-1&&s.y<this.ySize&&t.x>-1&&t.x<this.xSize&&t.y>-1&&t.y<this.ySize&&i},fadeCircle:function(){this.calcToRemoveList(),this.removeAndDownCell()},calcToRemoveList:function(){var s=this;this.removeList=[];for(var t=0;t<this.xSize;t++)for(var i=0;i<this.ySize;i++){var e=t+"_"+i;if(this.maps[t][i]&&-1===this.removeList.indexOf(e)){var o=[],r=[];this.sameCellColorLeft(t,i,this.maps[t][i].color,o),this.sameCellColorRight(t,i,this.maps[t][i].color,o),this.sameCellColorUp(t,i,this.maps[t][i].color,r),this.sameCellColorDown(t,i,this.maps[t][i].color,r),o.length>2&&(this.score+=o.length*(this.combo+1),o.forEach(function(t){s.removeList.push(t)})),r.length>2&&(this.score+=r.length*(this.combo+1),r.forEach(function(t){s.removeList.push(t)}))}}},removeAndDownCell:function(){var s=this;if(0===this.removeList.length)return this.removingFlag=!1,this.sourceCell=null,void(this.combo=0);this.combo++,this.removeList.forEach(function(t){s.maps[t.split("_")[0]][t.split("_")[1]].color=" "}),this.refreshMaps(),window.setTimeout(function(){s.downCell()},400)},downCell:function(){var s=this;this.initColors(),this.removeList.sort(),this.removeList.forEach(function(t){for(var i=t.split("_")[0],e=t.split("_")[1];e>0;e--)s.maps[i][e].color=s.maps[i][e-1].color;var o=parseInt(Math.random()*s.colors.length,10);s.maps[i][0].color=s.colors[o]}),this.refreshMaps(),window.setTimeout(function(){s.fadeCircle()},400)},sameCellColorLeft:function(s,t,i,e){-1===e.indexOf(s+"_"+t)&&e.push(s+"_"+t);var o=s-1;o>=0&&this.maps[o][t]&&this.maps[o][t].color===i&&this.sameCellColorLeft(o,t,i,e)},sameCellColorRight:function(s,t,i,e){-1===e.indexOf(s+"_"+t)&&e.push(s+"_"+t);var o=s+1;o<this.xSize&&this.maps[o][t]&&this.maps[o][t].color===i&&this.sameCellColorRight(o,t,i,e)},sameCellColorUp:function(s,t,i,e){-1===e.indexOf(s+"_"+t)&&e.push(s+"_"+t);var o=t-1;o>=0&&this.maps[s][o]&&this.maps[s][o].color===i&&this.sameCellColorUp(s,o,i,e)},sameCellColorDown:function(s,t,i,e){-1===e.indexOf(s+"_"+t)&&e.push(s+"_"+t);var o=t+1;o<this.ySize&&this.maps[s][o]&&this.maps[s][o].color===i&&this.sameCellColorDown(s,o,i,e)},mouseClick:function(s){var t=this;if(this.startFlag&&0!==this.timeProgress&&!this.removingFlag)if(null!==this.sourceCell){if(this.maps[this.sourceCell.x][this.sourceCell.y].click=!1,!this.near(this.sourceCell,s))return s.click=!0,this.sourceCell=s,void this.refreshMaps();this.removingFlag=!0,this.targetCell=s,window.setTimeout(function(){t.move(t.sourceCell,s)},500)}else this.sourceCell=s,this.sourceCell.click=!0,this.refreshMaps()},isMoveUp:function(s){return!!this.removingFlag&&(this.sourceCell.x===this.targetCell.x&&(s.x===this.sourceCell.x&&s.y===this.sourceCell.y?s.y===this.targetCell.y+1:s.x===this.targetCell.x&&s.y===this.targetCell.y?s.y===this.sourceCell.y+1:void 0))},isMoveDown:function(s){return!!this.removingFlag&&(this.sourceCell.x===this.targetCell.x&&(s.x===this.sourceCell.x&&s.y===this.sourceCell.y?s.y===this.targetCell.y-1:s.x===this.targetCell.x&&s.y===this.targetCell.y?s.y===this.sourceCell.y-1:void 0))},isMoveLeft:function(s){return!!this.removingFlag&&(this.sourceCell.y===this.targetCell.y&&(s.x===this.sourceCell.x&&s.y===this.sourceCell.y?s.x===this.targetCell.x+1:s.x===this.targetCell.x&&s.y===this.targetCell.y?s.x===this.sourceCell.x+1:void 0))},isMoveRight:function(s){return!!this.removingFlag&&(this.sourceCell.y===this.targetCell.y&&(s.x===this.sourceCell.x&&s.y===this.sourceCell.y?s.x===this.targetCell.x-1:s.x===this.targetCell.x&&s.y===this.targetCell.y?s.x===this.sourceCell.x-1:void 0))},refreshMaps:function(){this.showMaps=[],this.showMaps=this.maps}}}},,,function(s,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i(2),o=i(9),r=i.n(o),l=i(1);i.n(l);e.a.config.productionTip=!1,new e.a({el:"#eliminate",template:"<Eliminate/>",components:{Eliminate:r.a}})},,,function(s,t){},,,function(s,t){s.exports={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",[i("section",{staticClass:"hero is-dark is-large"},[i("div",{staticClass:"hero-head"},[i("Top",{attrs:{index:2}})],1)]),s._v(" "),i("section",{staticClass:"section is-medium body-image"},[i("div",{staticClass:"container"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-5 is-offset-1"},[i("div",{staticClass:"board"},s._l(s.showMaps,function(t,e){return i("div",{staticClass:"row"},s._l(t,function(t){return i("div",{staticClass:"cell",class:{"cell-r":"R"===t.color,"cell-b":"B"===t.color,"cell-g":"G"===t.color,"cell-y":"Y"===t.color,"cell-up":s.isMoveUp(t),"cell-down":s.isMoveDown(t),"cell-left":s.isMoveLeft(t),"cell-right":s.isMoveRight(t),"cell-click":t.click},on:{click:function(i){s.mouseClick(t)}}})}))})),s._v(" "),i("br"),s._v(" "),i("progress",{staticClass:"progress is-warning",staticStyle:{"max-width":"480px"},attrs:{value:s.timeProgress,max:"100"}})]),s._v(" "),i("div",{staticClass:"column is-6"},[i("a",{staticClass:"button is-warning",on:{click:s.startGame}},[s._v("开始游戏")]),s._v(" "),i("span",{staticClass:"tag is-warning"},[s._v("combo："+s._s(s.combo))]),s._v(" "),i("span",{staticClass:"tag is-warning"},[s._v("当前得分："+s._s(s.score))]),s._v(" "),i("span",{staticClass:"tag is-warning"},[s._v(s._s(s.time))])])])])]),s._v(" "),i("Bottom")],1)},staticRenderFns:[]}}],[15]);
//# sourceMappingURL=eliminate.3fdd9958a0ffd6eadeba.js.map